define("airstrikeBravoPortraitViews",["jquery","backbone","components","helperViews","handlebars","cssUtils","templates"],function(e,t,n,r,i,s){(function(){var e=i.template,t=i.templates=i.templates||{};t.categoryMenuItem=e(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<a><img src="',u=n.imgFilePath,o=u||t.imgFilePath,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"imgFilePath",{hash:{}})),s+=h(o)+'"></a>',s}),t.collection=e(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<ul data-iscroll="true"></ul>'}),t.currencyPack=e(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<div class="row">\n    <img src="',u=n.imgFilePath,o=u||t.imgFilePath,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"imgFilePath",{hash:{}})),s+=h(o)+'" class="item-image">\n    <div class="content">\n        <h1 class="item-name">',u=n.name,o=u||t.name,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"name",{hash:{}})),s+=h(o)+'</h1>\n        <span class="item-amount-label">\n		    ',u=n.currency_amount,o=u||t.currency_amount,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"currency_amount",{hash:{}})),s+=h(o)+'\n	    </span>\n        <img class="currency" src="',u=n.currency,o=u||t.currency,o=o===null||o===undefined||o===!1?o:o.imgFilePath,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"currency.imgFilePath",{hash:{}})),s+=h(o)+'">\n    </div>\n    <div class="buy-container">\n        <a class="buy">\n            <img src="',u=n.images,o=u||t.images,o=o===null||o===undefined||o===!1?o:o.buyImage,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"images.buyImage",{hash:{}})),s+=h(o)+'">\n        </a>\n        <div class="item-price">\n            <label>$',u=n.price,o=u||t.price,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"price",{hash:{}})),s+=h(o)+"</label>\n        </div>\n    </div>\n</div>\n",s}),t.equippableItem=e(function(e,t,n,r,i){function s(e,t){var r="",i;return r+="\n                <label>$",l=n.price,i=l||e.price,typeof i===p?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"price",{hash:{}})),r+=m(i)+"</label>\n		    ",r}function o(e,t){var r="",i;return r+="\n                <label>",l=n.price,i=l||e.price,typeof i===p?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"price",{hash:{}})),r+=m(i)+'</label>\n                <img src="',l=n.currency,i=l||e.currency,i=i===null||i===undefined||i===!1?i:i.imgFilePath,typeof i===p?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"currency.imgFilePath",{hash:{}})),r+=m(i)+'">\n		    ',r}n=n||e.helpers;var u="",a,f,l,c,h=this,p="function",d=n.helperMissing,v=void 0,m=this.escapeExpression;u+='<div class="row">\n\n    <img src="',l=n.images,a=l||t.images,a=a===null||a===undefined||a===!1?a:a.ownedIndicatorImage,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"images.ownedIndicatorImage",{hash:{}})),u+=m(a)+'" class="owned">\n    <img src="',l=n.images,a=l||t.images,a=a===null||a===undefined||a===!1?a:a.notOwnedIndicatorImage,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"images.notOwnedIndicatorImage",{hash:{}})),u+=m(a)+'" class="not-owned">\n\n    <img src="',l=n.imgFilePath,a=l||t.imgFilePath,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"imgFilePath",{hash:{}})),u+=m(a)+'" class="item-image">\n    <div class="content">\n        <h1 class="item-name">',l=n.name,a=l||t.name,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"name",{hash:{}})),u+=m(a)+'</h1>\n    </div>\n    <div class="actions">\n        <span class="toggle-equip equipped"><img src="',l=n.images,a=l||t.images,a=a===null||a===undefined||a===!1?a:a.equipped,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"images.equipped",{hash:{}})),u+=m(a)+'"></span>\n        <a class="toggle-equip equip"><img src="',l=n.images,a=l||t.images,a=a===null||a===undefined||a===!1?a:a.equip,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"images.equip",{hash:{}})),u+=m(a)+'"></a>\n\n        <div class="item-price">\n		    ',l=n.isMarketPurchaseType,a=l||t.isMarketPurchaseType,f=n["if"],c=h.program(1,s,i),c.hash={},c.fn=c,c.inverse=h.program(3,o,i),a=f.call(t,a,c);if(a||a===0)u+=a;return u+='\n        </div>\n        <img src="',l=n.images,a=l||t.images,a=a===null||a===undefined||a===!1?a:a.expandImage,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"images.expandImage",{hash:{}})),u+=m(a)+'" class="expand-collapse">\n	</div>\n</div>\n<div class="row">\n    <div class="item-description">',l=n.description,a=l||t.description,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"description",{hash:{}})),u+=m(a)+'</div>\n    <div class="buy-container">\n        <a class="buy">\n            <img src="',l=n.images,a=l||t.images,a=a===null||a===undefined||a===!1?a:a.buyImage,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"images.buyImage",{hash:{}})),u+=m(a)+'">\n        </a>\n    </div>\n</div>',u}),t.modalDialog=e(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<div class="modal">\n    <div class="dialog font-face-2">\n        <h1>',u=n.text,o=u||t.text,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"text",{hash:{}})),s+=h(o)+'</h1>\n        <div class="actions">\n            <a><img src="',u=n.noButton,o=u||t.noButton,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"noButton",{hash:{}})),s+=h(o)+'" class="cancel"></a>\n            <a><img src="',u=n.yesButton,o=u||t.yesButton,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"yesButton",{hash:{}})),s+=h(o)+'" class="buy-more"></a>\n        </div>\n    </div>\n</div>\n',s}),t.offer=e(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<div class="row">\n    <img src="',u=n.imgFilePath,o=u||t.imgFilePath,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"imgFilePath",{hash:{}})),s+=h(o)+'" class="item-image">\n    <div class="content">\n        <h1 class="item-name">',u=n.name,o=u||t.name,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"name",{hash:{}})),s+=h(o)+'</h1>\n        <div class="item-description">',u=n.description,o=u||t.description,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"description",{hash:{}})),s+=h(o)+"</div>\n    </div>\n</div>\n",s}),t.singleUseItem=e(function(e,t,n,r,i){function s(e,t){var r="",i;return r+='\n        <div class="item-balance-wrap">\n    	    <span class="balance-label">\n    		    You have:\n    	    </span>\n            <span class="balance">',h=n.balance,i=h||e.balance,typeof i===v?i=i.call(e,{hash:{}}):i===g&&(i=m.call(e,"balance",{hash:{}})),r+=y(i)+"</span>\n        </div>\n	    ",r}function o(e,t){var r="",i;return r+="\n                <label>$",h=n.price,i=h||e.price,typeof i===v?i=i.call(e,{hash:{}}):i===g&&(i=m.call(e,"price",{hash:{}})),r+=y(i)+"</label>\n		    ",r}function u(e,t){var r="",i;return r+="\n                <label>",h=n.price,i=h||e.price,typeof i===v?i=i.call(e,{hash:{}}):i===g&&(i=m.call(e,"price",{hash:{}})),r+=y(i)+'</label>\n                <img src="',h=n.currency,i=h||e.currency,i=i===null||i===undefined||i===!1?i:i.imgFilePath,typeof i===v?i=i.call(e,{hash:{}}):i===g&&(i=m.call(e,"currency.imgFilePath",{hash:{}})),r+=y(i)+'">\n		    ',r}n=n||e.helpers;var a="",f,l,c,h,p,d=this,v="function",m=n.helperMissing,g=void 0,y=this.escapeExpression,b=n.blockHelperMissing;a+='<div class="row">\n    <img src="',h=n.imgFilePath,f=h||t.imgFilePath,typeof f===v?f=f.call(t,{hash:{}}):f===g&&(f=m.call(t,"imgFilePath",{hash:{}})),a+=y(f)+'" class="item-image">\n    <div class="content">\n        <h1 class="item-name">',h=n.name,f=h||t.name,typeof f===v?f=f.call(t,{hash:{}}):f===g&&(f=m.call(t,"name",{hash:{}})),a+=y(f)+"</h1>\n	    ",f="singleUse",h=n.type,l=h||t.type,h=n.check,c=h||t.check,p=d.program(1,s,i),p.hash={},p.fn=p,p.inverse=d.noop,h&&typeof c===v?f=c.call(t,l,f,p):f=b.call(t,c,l,f,p);if(f||f===0)a+=f;a+='\n    </div>\n    <div class="actions">\n        <div class="item-price">\n		    ',h=n.isMarketPurchaseType,f=h||t.isMarketPurchaseType,l=n["if"],p=d.program(3,o,i),p.hash={},p.fn=p,p.inverse=d.program(5,u,i),f=l.call(t,f,p);if(f||f===0)a+=f;return a+='\n        </div>\n        <img src="',h=n.images,f=h||t.images,f=f===null||f===undefined||f===!1?f:f.expandImage,typeof f===v?f=f.call(t,{hash:{}}):f===g&&(f=m.call(t,"images.expandImage",{hash:{}})),a+=y(f)+'" class="expand-collapse">\n	</div>\n</div>\n<div class="row">\n    <div class="item-description">',h=n.description,f=h||t.description,typeof f===v?f=f.call(t,{hash:{}}):f===g&&(f=m.call(t,"description",{hash:{}})),a+=y(f)+'</div>\n    <div class="buy-container">\n        <a class="buy">\n            <img src="',h=n.images,f=h||t.images,f=f===null||f===undefined||f===!1?f:f.buyImage,typeof f===v?f=f.call(t,{hash:{}}):f===g&&(f=m.call(t,"images.buyImage",{hash:{}})),a+=y(f)+'">\n        </a>\n    </div>\n</div>',a}),t.template=e(function(e,t,n,r,i){function s(e,t){var n="",r;return n+='\n                <div class="label-container">\n                    <label data-currency="',r=e.itemId,typeof r===h?r=r.call(e,{hash:{}}):r===d&&(r=p.call(e,"this.itemId",{hash:{}})),n+=v(r)+'">',r=e.balance,typeof r===h?r=r.call(e,{hash:{}}):r===d&&(r=p.call(e,"this.balance",{hash:{}})),n+=v(r)+'</label>\n                    <img class="currency" src="',r=e.imgFilePath,typeof r===h?r=r.call(e,{hash:{}}):r===d&&(r=p.call(e,"this.imgFilePath",{hash:{}})),n+=v(r)+'" alt="Balance Image">\n                </div>\n                ',n}n=n||e.helpers;var o="",u,a,f,l,c=this,h="function",p=n.helperMissing,d=void 0,v=this.escapeExpression;f=n.fonts,u=f||t.fonts,f=n.fontFaceStylesheet,a=f||t.fontFaceStylesheet,typeof a===h?u=a.call(t,u,{hash:{}}):a===d?u=p.call(t,"fontFaceStylesheet",u,{hash:{}}):u=a,o+=v(u)+'\n<div id="content-container">\n    <div class="header font-face-1">\n        <div id="top-bar">\n            <div class="back">\n                <a id="quit-button"><img src="',f=n.images,u=f||t.images,u=u===null||u===undefined||u===!1?u:u.quitImage,typeof u===h?u=u.call(t,{hash:{}}):u===d&&(u=p.call(t,"images.quitImage",{hash:{}})),o+=v(u)+'"></a>\n                <a id="back-button"><img src="',f=n.images,u=f||t.images,u=u===null||u===undefined||u===!1?u:u.backImage,typeof u===h?u=u.call(t,{hash:{}}):u===d&&(u=p.call(t,"images.backImage",{hash:{}})),o+=v(u)+'"></a>\n            </div>\n            <div id="balance-container">\n                ',f=n.currencies,u=f||t.currencies,a=n.each,l=c.program(1,s,i),l.hash={},l.fn=l,l.inverse=c.noop,u=a.call(t,u,l);if(u||u===0)o+=u;return o+='\n            </div>\n        </div>\n        <div class="title-container">\n            <h1 class="title">',f=n.pages,u=f||t.pages,u=u===null||u===undefined||u===!1?u:u.menu,u=u===null||u===undefined||u===!1?u:u.title,typeof u===h?u=u.call(t,{hash:{}}):u===d&&(u=p.call(t,"pages.menu.title",{hash:{}})),o+=v(u)+'</h1>\n            <h2 class="title"></h2>\n        </div>\n    </div>\n    <div id="pages" class="font-face-2">\n    </div>\n</div>\n',o}),t.upgradableItem=e(function(e,t,n,r,i){function s(e,t){var r="",i;return r+="\n                <label>$",l=n.price,i=l||e.price,typeof i===p?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"price",{hash:{}})),r+=m(i)+"</label>\n		    ",r}function o(e,t){var r="",i;return r+="\n                <label>",l=n.price,i=l||e.price,typeof i===p?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"price",{hash:{}})),r+=m(i)+'</label>\n                <img src="',l=n.currency,i=l||e.currency,i=i===null||i===undefined||i===!1?i:i.imgFilePath,typeof i===p?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"currency.imgFilePath",{hash:{}})),r+=m(i)+'">\n		    ',r}n=n||e.helpers;var u="",a,f,l,c,h=this,p="function",d=n.helperMissing,v=void 0,m=this.escapeExpression;u+='<div class="row">\n    <img src="',l=n.imgFilePath,a=l||t.imgFilePath,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"imgFilePath",{hash:{}})),u+=m(a)+'" class="item-image">\n    <div class="content">\n        <h1 class="item-name">',l=n.name,a=l||t.name,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"name",{hash:{}})),u+=m(a)+'</h1>\n        <img class="upgrade-bar" src="',l=n.upgradeBarImage,a=l||t.upgradeBarImage,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"upgradeBarImage",{hash:{}})),u+=m(a)+'">\n    </div>\n    <div class="actions">\n        <div class="item-price">\n		    ',l=n.isMarketPurchaseType,a=l||t.isMarketPurchaseType,f=n["if"],c=h.program(1,s,i),c.hash={},c.fn=c,c.inverse=h.program(3,o,i),a=f.call(t,a,c);if(a||a===0)u+=a;return u+='\n        </div>\n        <img src="',l=n.images,a=l||t.images,a=a===null||a===undefined||a===!1?a:a.expandImage,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"images.expandImage",{hash:{}})),u+=m(a)+'" class="expand-collapse">\n    </div>\n	<div class="complete-indicator">\n		<label>Fully Upgraded</label>\n	</div>\n</div>\n<div class="row">\n    <div class="item-description">',l=n.description,a=l||t.description,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"description",{hash:{}})),u+=m(a)+'</div>\n    <div class="buy-container">\n        <a class="upgrade">\n            <img src="',l=n.images,a=l||t.images,a=a===null||a===undefined||a===!1?a:a.buyImage,typeof a===p?a=a.call(t,{hash:{}}):a===v&&(a=d.call(t,"images.buyImage",{hash:{}})),u+=m(a)+'">\n        </a>\n    </div>\n</div>',u})})();var o=s.getTransitionendEvent(),u=n.BaseStoreView.Const.OFFERS_ID,a=n.BaseStoreView.Const.OFFERS_TITLE,f=r.HeaderView,l=i.getTemplate,c=n.ExpandableEquippableItemView,h=n.ExpandableSingleUseItemView,p=c.extend({template:l("equippableItem")}),d=h.extend({template:l("singleUseItem"),animateBalanceClass:"changed"}),v=n.ExpandableSingleUsePackView.extend({template:l("singleUseItem")}),m=n.ExpandableUpgradableItemView.extend({template:l("upgradableItem")}),g=n.ExpandableLifetimeItemView.extend({template:l("equippableItem")}),y=n.CurrencyPackView.extend({template:l("currencyPack")}),b=n.OfferItemView.extend({template:l("offer")}),w=n.LinkView.extend({template:l("categoryMenuItem")}),E=n.LinkView.extend({template:l("categoryMenuItem")}),S=n.IScrollCollectionView.extend({template:l("collection")}),x=n.ExpandableIScrollCollectionView.extend({template:l("collection"),itemView:b}),T=n.ExpandableIScrollCollectionView.extend({template:l("collection")}),N=n.ExpandableIScrollCollectionView.extend({template:l("collection"),getItemView:function(e){if(!e)return n.ExpandableIScrollCollectionView.prototype.getItemView.apply(this,arguments);var t;if(e.is("upgradable"))t=m;else switch(e.getType()){case"singleUse":t=d;break;case"goodPacks":t=v;break;case"equippable":t=p;break;case"lifetime":t=g}return t}}),C=function(e){var t=e.assets.theme,n={images:t.images},r=e.assets,i=function(e){return _.extend(e,n)},s=function(){return i({imgFilePath:r.getItemAsset(this.model.id),currency:{imgFilePath:r.getItemAsset(this.model.getCurrencyId())},price:this.model.getPrice(),isMarketPurchaseType:this.model.isMarketPurchaseType(),item:t.pages.goods&&t.pages.goods.item?t.pages.goods.item:{}})};p.prototype.templateHelpers=s,d.prototype.templateHelpers=s,v.prototype.templateHelpers=s,g.prototype.templateHelpers=s,m.prototype.templateHelpers=function(){var e=this.model.getNextUpgrade(),n=this.model.getCurrentUpgradeBarAssetId();return i({imgFilePath:r.getUpgradeAsset(e.id),upgradeBarImage:r.getUpgradeBarAsset(n),name:e.getName(),description:e.getDescription(),price:this.model.getPrice(),currency:{imgFilePath:r.getItemAsset(this.model.getCurrencyId())},item:t.pages.goods&&t.pages.goods.item?t.pages.goods.item:{}})},y.prototype.templateHelpers=function(){return i({price:this.model.getPrice(),imgFilePath:r.getItemAsset(this.model.id),currency:{imgFilePath:r.getItemAsset(this.model.getCurrencyId())},item:t.pages.currencyPacks&&t.pages.currencyPacks.item?t.pages.currencyPacks.item:{}})},b.prototype.templateHelpers=function(){return{imgFilePath:r.getHookAsset(this.model.id)}},w.prototype.templateHelpers=function(){return{imgFilePath:r.getCategoryAsset(this.model.id)}},E.prototype.templateHelpers=function(){return{imgFilePath:r.getOffersMenuLinkAsset()||this._imagePlaceholder}}},k=n.BaseStoreView.extend({initialize:function(){_.bindAll(this,"buyItem","equipGoods"),this.dialogModal=this.theme.noFundsModal,this.messageDialogOptions={background:this.dialogModal.background,textStyle:this.dialogModal.textStyle},this.loadingModal=_.extend({text:"Loading..."},this.messageDialogOptions);var e=this.model.getCurrencies(),n=this.model.getCategories(),r=this.model.getOfferHooks();this.headerStates={},this.categoryMenuView=(new S({className:"menu items clearfix",collection:n,itemView:w})).on("itemview:select",function(e){this.playSound().changeViewTo(this.children.findByCustom(e.model.id))},this),this.children.add(this.categoryMenuView,"menu"),this.headerStates[this.categoryMenuView.cid]=this.theme.pages.menu.title,this.currencyPacksLinks=new t.ChildViewContainer,e.each(this.addCurrencyLinkView,this),e.on({add:function(e){this.addCurrencyLinkView(e,{render:!0})},remove:this.removeCurrencyLinkView},this),r.isEmpty()||this.addOffersLinkView().addOffersView(r),this.listenTo(r,{add:function(){r.size()===1&&this.addOffersLinkView({render:!0}).addOffersView(r,{render:!0})},remove:function(){r.isEmpty()&&this.removeOffersView().removeOffersLink()}}),this.activeView=this.categoryMenuView,n.each(this.addCategoryView,this),n.on({add:function(e){this.addCategoryView(e,{render:!0})},remove:this.removeCategoryView,"change:name":function(e){var t=e.changedAttributes(),n=e.previousAttributes();if(t&&n&&t.name&&n.name){var r=this.children.findByCustom(n.name);this.children.remove(r),this.children.add(r,t.name)}},reset:function(){this.addCurrencyLinks().addOfferLinks().refreshActiveViewIScroll()}},this),e.each(this.addCurrencyView,this),e.on({add:function(e){this.addCurrencyView(e,{render:!0})},remove:this.removeCurrencyView,"change:itemId":function(e){var t=e.changedAttributes(),n=e.previousAttributes();if(t&&n&&t.itemId&&n.itemId){var r=this.children.findByCustom(n.itemId);this.children.remove(r),this.children.add(r,t.itemId)}}},this),this.header=(new f({states:this.headerStates,initialState:this.categoryMenuView.cid})).on({back:function(){this.playSound(),this.changeViewTo(this.categoryMenuView)},quit:this.leaveStore},this)},changeActiveViewByModel:function(e){var t=this.children.findByCustom(e.id);this.changeViewTo(t)},changeViewTo:function(t){this.activeView.collapseExpandedChild&&this.activeView.collapseExpandedChild({noSound:!0});if(this.activeView!=t){var n=this.activeView.$el.hasClass("menu"),r=this.activeView.$el.parents("div#pages");n?(r.addClass("flip"),t.$el.addClass("on")):(t.$el.hasClass("menu")?r.removeClass("flip"):t.$el.addClass("on"),this.activeView.$el.removeClass("on")),t.$el.one(o,function(){e(r).animate({scrollTop:0},"slow")}),this.activeView=t,this.refreshActiveViewIScroll(),this.header.changeStateTo(t.cid)}},changeViewToItem:function(e){if(!e)return;var t=this.model.packsMap[e];if(t){var n=t.getCurrencyId();this.showCurrencyPacks(n),this.activeView.scrollToItemByModel(t,500);return}var r=this.model.getHookById(e);if(r){var i=this.children.findByCustom(u);this.changeViewTo(i),this.activeView.scrollToItemByModel(r,500);return}var s=this.model.goodsMap[e];if(!s){console.log('View was not changed. Could not find item: "'+e+'".');return}var o=this.model.categoryMap[e],a=this.children.findByCustom(o.id);this.changeViewTo(a),this.activeView.scrollToItemByModel(s,500)},showCurrencyPacks:function(e){var t=this.model.getCurrency(e),n=this.children.findByCustom(t.id);this.changeViewTo(n)},ui:{pages:"#pages",header:".header"},onRender:function(){this.header.setElement(this.ui.header).render().bindUIElements(),this.children.each(this._appendContainerView,this);var e=this.children.findByCustom("menu");this.addCurrencyLinks().addOfferLinks().refreshActiveViewIScroll()},refreshActiveViewIScroll:function(){return this.activeView.refreshIScroll&&this.activeView.refreshIScroll(),this},buyItem:function(e){this.playSound().wantsToBuyItem(e.model.id)},equipGoods:function(e){this.playSound().wantsToEquipGoods(e.model)},upgradeGood:function(e){this.playSound().wantsToUpgradeVirtualGood(e.model)},zoomFunction:function(){return innerHeight/innerWidth>1.5?innerWidth/640:innerHeight/960},_appendContainerView:function(e){this.ui.pages.append(e.render().el)},appendCurrencyLinkView:function(e){var t=this.children.findByCustom("menu");t.$itemViewContainer.append(e.render().el)},appendOffersLinkView:function(e){var t=this.children.findByCustom("menu").$el.children(":last-child");t.append(e.render().el)},addCategoryView:function(e,t){var n=e.getName(),r=e.getGoods(),i;i=(new N({className:"items virtualGoods category "+n,collection:r})).on({"itemview:expand":_.bind(function(){return this.playSound()},this),"itemview:collapse":this.conditionalPlaySound,"itemview:buy":this.buyItem,"itemview:equip":this.equipGoods,"itemview:upgrade":this.upgradeGood},this),this.children.add(i,e.id),this.headerStates[i.cid]=n,t&&t.render===!0&&this.appendCategoryView(i)},addCurrencyLinks:function(){return this.currencyPacksLinks.each(this.appendCurrencyLinkView,this),this},addCurrencyLinkView:function(e,t){var n=(new w({className:"item currency-packs",templateHelpers:{imgFilePath:this.theme.currencyPacksCategoryImage}})).on("select",function(){this.playSound().changeViewTo(this.children.findByCustom(e.id))},this);this.currencyPacksLinks.add(n,e.id);if(t&&t.render===!0){this.appendCurrencyLinkView(n);var r=this.children.findByCustom("menu");r.refreshIScroll()}},addOfferLinks:function(){return this.offersLink&&this.appendOffersLinkView(this.offersLink),this},addOffersLinkView:function(e){this.offersLink=(new E({className:"item category-offers"})).on("select",function(){this.playSound().changeViewTo(this.children.findByCustom(u))},this);if(e&&e.render===!0){this.appendOffersLinkView(this.offersLink);var t=this.children.findByCustom("menu");t.refreshIScroll()}return this},addOffersView:function(e,t){var n=(new x({className:"items offers category",collection:e})).on("itemview:select",function(e){this.wantsToOpenOffer(e.model)},this);this.children.add(n,u),this.headerStates[n.cid]=a,t&&t.render===!0&&this.appendOfferView(n)},addCurrencyView:function(e,t){var n=(new T({className:"items currencyPacks category",collection:e.getPacks(),itemView:y})).on("itemview:buy",this.buyItem);this.children.add(n,e.id),this.headerStates[n.cid]=e.getName(),t&&t.render===!0&&this.appendCurrencyView(n)},removeCurrencyLinkView:function(e){var t=this.currencyPacksLinks.findByCustom(e.id);t.close(),this.currencyPacksLinks.remove(t)},_removeContainerView:function(e){this.changeViewTo(this.categoryMenuView);var t=this.children.findByCustom(e.id);return t.close(),this.children.remove(t),delete this.headerStates[t.cid],this},removeOffersView:function(){return this._removeContainerView({id:u})},removeOffersLink:function(){this.offersLink.close(),delete this.offersLink}});return _.extend(k.prototype,{appendCategoryView:k.prototype._appendContainerView,appendCurrencyView:k.prototype._appendContainerView,appendOfferView:k.prototype._appendContainerView,removeCategoryView:k.prototype._removeContainerView,removeCurrencyView:k.prototype._removeContainerView}),{createStoreView:function(e){return C(e.storeViewOptions.model),(new k(e.storeViewOptions)).on("imagesLoaded",e.imagesLoadedCallback).render()}}});